# ğŸ“–Solution 

## What is Anomaly Detection?

Anomaly Detectionì€ ë°ì´í„° ë‚´ì— ì¡´ì¬í•˜ëŠ” ë¹„ì •ìƒì ì¸ íŒ¨í„´ì´ë‚˜ ì´ìƒì¹˜ë¥¼ íƒì§€í•˜ëŠ” AI ì»¨í…ì¸ ì…ë‹ˆë‹¤. ë³„ë„ì˜ ë ˆì´ë¸”ë§ ì‘ì—… ì—†ì´ë„ í†µê³„ ë° Machine learning ê¸°ë²•ì„ í™œìš©í•˜ì—¬ ë°ì´í„°ì˜ ì •ìƒ ë²”ì£¼ì™€ ë¹„ì •ìƒ ë²”ì£¼ë¥¼ ìë™ìœ¼ë¡œ êµ¬ë¶„í•´ ëƒ…ë‹ˆë‹¤. Anomaly Detectionì€ ê°œë³„ ë°ì´í„° í¬ì¸íŠ¸ê°€ ì •ìƒ ë²”ì£¼ì—ì„œ ë²—ì–´ë‚˜ëŠ”ì§€ë¥¼ íƒì§€í•˜ëŠ” Point anomaly detection(PAD), ì •ìƒ íŒ¨í„´ì˜ ë²”ì£¼ì—ì„œ ë²—ì–´ë‚œ ì´ìƒ íŒ¨í„´ì„ ì‹ë³„í•˜ëŠ” Contextual anomaly detection(CAD, TBD), ê·¸ë¦¬ê³  ë‹¤ë³€ëŸ‰ ë°ì´í„°ì˜ ê´€ê³„ë¥¼ ì¢…í•©ì ìœ¼ë¡œ í•™ìŠµí•˜ì—¬ ë¹„ì •ìƒì ì¸ ì‹œì ê³¼ íŒ¨í„´ì„ íƒì§€í•˜ëŠ” Multivariate anomaly detection(MAD, TBD) ëª¨ë¸ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ë ‡ê²Œ Anomaly Detectionì€ ë°ì´í„°ì˜ íŠ¹ì„±ê³¼ ëª©ì ì— ë§ê²Œ ë‹¤ì–‘í•˜ê²Œ í™œìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## When to use Anomaly Detection?

Anomaly Detection ì ìš©ì´ ê°€ëŠ¥í•œ ë¶„ì•¼ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.  

ì œì¡° ê³¼ì • ì´ìƒì¹˜ íƒì§€: ì œì¡° ê³¼ì • ëª¨ë‹ˆí„°ë§ ì„¼ì„œë¡œ ì œì¡° ê³¼ì • ì¤‘ ì´ìƒ ë°œìƒ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ë ¤ëŠ” ê³ ê°ì„ ìœ„í•œ ê¸°ëŠ¥ì…ë‹ˆë‹¤. ì´ìƒ ë°œìƒ ì—¬ë¶€ë¥¼ íƒì§€í•˜ì—¬ ë¬¸ì œë¥¼ ì‚¬ì „ì— ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
ì‹œê³„ì—´ ì´ìƒì¹˜ íƒì§€: ì œì¡° ê³¼ì • ë¿ë§Œ ì•„ë‹ˆë¼ ì£¼ì‹, ê°ì¢… ì¶”ì„¸ ë°ì´í„° ë“± ì‹œê³„ì—´ ë°ì´í„°ì— ëŒ€í•˜ì—¬ ì´ìƒì¹˜ë¥¼ í™•ì¸í•˜ê³ ì í•˜ëŠ” ê³ ê°ì…ë‹ˆë‹¤. í•´ë‹¹ ì´ìƒì¹˜ë¥¼ ì¡°ê¸°ì— íƒì§€í•˜ì—¬ ì‚¬ìš©ìëŠ” ì ì ˆí•œ ì¡°ì¹˜ë¥¼ ì·¨í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.

## Key features and benefits 

> ê¸°ìˆ ì  ê´€ì  í˜¹ì€ ë„ë©”ì¸ ê´€ì ì—ì„œ ì‘ì„±í•´ì£¼ì„¸ìš”.

Anomaly Detectionì€ ë¹ ë¥´ê³  ë†’ì€ íš¨ìœ¨ì„±ì„ ê°–ì¶˜ í†µê³„ ê¸°ë°˜ì˜ ëª¨ë¸ì„ ì œê³µí•˜ì—¬, í•™ìŠµ ë¦¬ì†ŒìŠ¤ë¥¼ í¬ê²Œ í•„ìš”ë¡œ í•˜ì§€ ì•Šìœ¼ë©´ì„œë„ ë›°ì–´ë‚œ ì„±ëŠ¥ì„ ë°œíœ˜í•©ë‹ˆë‹¤.

ì´ëŠ” ì œí’ˆ ìƒì‚° ê³¼ì •ì—ì„œ ì–»ì–´ì§„ ì¼ì°¨ì› ë°ì´í„° ë‚´ì—ì„œ ì´ìƒì¹˜ë¥¼ íƒì§€í•˜ê³ ì í•˜ëŠ” ê³ ê°ë“¤ì—ê²Œ ìœ ìš©í•©ë‹ˆë‹¤. ë˜í•œ ì£¼ê°€ ì¶”ì„¸ ë“±ê³¼ ê°™ì€ ì‹œê³„ì—´ ë°ì´í„°ì—ì„œ ê°‘ì‘ìŠ¤ëŸ° íŠ¹ì´ ì‚¬í•­ì´ ë°œìƒí•œ í¬ì¸íŠ¸ë¥¼ íƒì§€í•˜ê³ ì í•˜ëŠ” ê³ ê°ë“¤ì—ê²Œë„ ìœ ìš©í•œ ì†”ë£¨ì…˜ì…ë‹ˆë‹¤.

**ë¹ ë¥¸ ì†ë„ì™€ ë©”ëª¨ë¦¬ ìš”êµ¬ê°€ ë‚®ì€ í†µê³„ ê¸°ë°˜ ëª¨ë¸**  
Anomaly detectionë¥¼ í†µí•´ ìš°ìˆ˜í•˜ê³  í•™ìŠµ ë¦¬ì†ŒìŠ¤ê°€ ë§ì´ í•„ìš”í•˜ì§€ ì•Šì€ íš¨ìœ¨ì ì¸ í†µê³„ ë° ë¨¸ì‹ ëŸ¬ë‹ ê¸°ë°˜ì˜ ëª¨ë¸ì„ ì†ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¹ ë¥¸ ì†ë„ì™€ ë©”ëª¨ë¦¬ ìš”êµ¬ê°€ ë‚®ì€ DynamicThreshold, SpectralResidualê³¼ ê°™ì€ ì•Œê³ ë¦¬ì¦˜ì„ ê¸°ë°˜ìœ¼ë¡œ ADëŠ” ì‹ ë¢°ì„± ìˆê³ , ë¹ ë¥¸ ì†ë„ë¡œ ì´ìƒì¹˜ë¥¼ íƒì§€í•´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ë³µìˆ˜ ì»¬ëŸ¼ì— ëŒ€í•œ ì´ìƒì¹˜ íƒì§€ ë° ê·¸ë£¹ ë³„ ì´ìƒì¹˜ íƒì§€**  
ê²½ìš°ì— ë”°ë¼ ê° í¬ì¸íŠ¸ ë§ˆë‹¤ ì´ìƒì¹˜ íƒì§€ë¥¼ í•˜ê³  ì‹¶ì€ ë°ì´í„°ê°€ ì—¬ëŸ¬ ì¢…ë¥˜ê°€ ì¡´ì¬í•˜ê±°ë‚˜, ì„œë¡œ ë‹¤ë¥¸ ê·¸ë£¹ í˜¹ì€ ì„¼ì„œ ë“±ì—ì„œ ì–»ì–´ì§„ ë°ì´í„°ë“¤ì„ ê·¸ë£¹ë³„ë¡œ ì´ìƒ íƒì§€ë¥¼ ì§„í–‰í•´ì•¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ADëŠ” ì‹¤í—˜ê³„íšì„œì˜ argumentë§Œ ë³€ê²½í•´ì¤Œìœ¼ë¡œì¨ ì´ë¥¼ ì‰½ê³  ë¹ ë¥´ê²Œ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ì‹¤í—˜ê³„íšì„œë¥¼ ì´ìš©í•œ ê°„í¸í•œ ì‚¬ìš©ì„±**  
Anomaly Detection ì¤‘ Point Anomaly Detection ëª¨ë¸ì€ DynamicThreshold, SpectralResidual, stl_DynamicThreshodl, stl_SpectralResidualì´ë¼ëŠ” 4ê°€ì§€ ëª¨ë¸ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ëŸ° ëª¨ë¸ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì‹¤í—˜ê³„íšì„œì˜ argumentë§Œ ë³€ê²½í•˜ë©´ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆì–´, ê°„í¸í•˜ë©´ì„œë„ íš¨ìœ¨ì ì¸ ì‚¬ìš©ì„±ì„ ì œê³µí•©ë‹ˆë‹¤.


# ğŸ’¡Features

## Pipeline

AI Contentsì˜ pipelineì€ ê¸°ëŠ¥ ë‹¨ìœ„ì¸ assetì˜ ì¡°í•©ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤. ADëŠ” ì´ 6ê°€ì§€ assetì˜ ì¡°í•©ìœ¼ë¡œ pipelineì´ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.  

**Train pipeline**
```
Input - Readiness - Preprocess - Train
```

**Inference pipeline**
```
Input - Readiness - Preprocess - Inference - Output
```

## Assets

> asset_{}.py ì™¸ dataset.py ë“± ê¸°íƒ€ ëª¨ë“ˆ ì„¤ëª…ë„ í¬í•¨í•´ì£¼ì„¸ìš”.

ê° ë‹¨ê³„ëŠ” assetìœ¼ë¡œ êµ¬ë¶„ë©ë‹ˆë‹¤.

**Input asset**  
Anomaly Detectionì€ í•™ìŠµí•  ë•Œ ì´ìƒíƒì§€ë¥¼ í•˜ê³ ì í•˜ëŠ” x ì»¬ëŸ¼ì´ í¬í•¨ëœ tabular í˜•íƒœì˜ ë°ì´í„°ë¡œ ë™ì‘í•©ë‹ˆë‹¤. ë”°ë¼ì„œ input assetì—ì„œëŠ” í•´ë‹¹ csv ë°ì´í„°ë¥¼ ì½ê³  ë‹¤ìŒ assetìœ¼ë¡œ ì „ë‹¬í•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ìœ„ ë„í‘œì—ì„œ ë³´ë“¯ ë‹¤ìŒ assetì¸ Preprocess assetìœ¼ë¡œ ì „ë‹¬ë©ë‹ˆë‹¤.

**Readiness asset**  
Readniess assetì—ì„œëŠ” ì „ì²˜ë¦¬ì™€ í•™ìŠµ ë° ì¶”ë¡ ì„ ì§„í–‰í•˜ê¸° ì „ ë°ì´í„° ì…ë ¥ê³¼ ì„¤ì • ë“±ì´ ì¡°ê±´ì— ë§ê²Œ ë˜ì–´ ìˆëŠ”ì§€ë¥¼ ì²´í¬í•˜ê²Œ ë©ë‹ˆë‹¤.

**Preprocess asset**  
Anomaly Detectionì€ í•™ìŠµ í˜¹ì€ ì¶”ë¡ ì´ ì§„í–‰ë˜ê¸° ì „ ë°ì´í„°ë¥¼ ì „ì²˜ë¦¬í•˜ëŠ” ê³¼ì •ì„ ë¨¼ì € ê±°ì¹˜ê²Œ ë˜ë©° ì´ ê³¼ì •ì´ process assetì—ì„œ ì§„í–‰ë©ë‹ˆë‹¤. í•´ë‹¹ ê³¼ì •ì—ì„œëŠ” ê° í¬ì¸íŠ¸ë§ˆë‹¤ ë¹ˆ ê°’ í˜¹ì€ NaNê³¼ ê°™ì´ ì •ìƒì ì´ì§€ ì•Šì€ í¬ì¸íŠ¸ë¥¼ ì œê±°í•˜ê±°ë‚˜ scalingì„ í•˜ëŠ” ë“±ì„ ê³¼ì •ì´ ì§„í–‰ë©ë‹ˆë‹¤.

**Train asset**  
Anomaly Detectionì—ì„œ train assetì€ ì´ìƒ íƒì§€ë¥¼ ìœ„í•œ ìµœì ì˜ íŒŒë¼ë¯¸í„°ë¥¼ ì°¾ì•„ë‚´ëŠ” ê³¼ì •ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ìš°ì„  preprocess assetì„ ê±°ì³ì„œ ì „ì²˜ë¦¬ê°€ ì™„ë£Œëœ ë°ì´í„°ë¥¼ ì „ë‹¬ ë°›ìŠµë‹ˆë‹¤.ê·¸ í›„ ì‹¤í—˜ê³„íšì„œì— ë¯¸ë¦¬ ì‘ì„±í•œ ì„¤ì •ì— ë§ê²Œ ë°ì´í„°ë¥¼ ê·¸ë£¹ë³„, ì»¬ëŸ¼ë³„ë¡œ ë‚˜ëˆ„ê²Œ ë©ë‹ˆë‹¤. ë‚˜ëˆ„ì–´ì§„ ë°ì´í„°ë§ˆë‹¤ ëª¨ë¸ë³„ë¡œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ê³  bayesian optimizationì„ í†µí•´ ëª¨ë¸ ë³„ë¡œ ìµœì ì„ íŒŒë¼ë¯¸í„°ë“¤ ì°¾ì•„ë‚´ëŠ” ê³¼ì •ì„ ì§„í–‰í•©ë‹ˆë‹¤. ì´ ê³¼ì •ì´ ì™„ë£Œë˜ê³  ë‚˜ë©´ ëª¨ë¸ ë³„ ì„±ëŠ¥ê³¼ í•™ìŠµ ê³¼ì •ì—ì„œì˜ ì¶”ë¡  ê²°ê³¼ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.ë§Œì•½ x ì»¬ëŸ¼ ë³„ë¡œ ë ˆì´ë¸”ì´ ì¡´ì¬í•˜ëŠ” ê²½ìš° unsupervised ê¸°ë°˜ì˜ metricì´ ì•„ë‹Œ, f1 score, precision, recallì„ ì§ì ‘ maximize í•˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê²½ìš° ëª¨ë¸ ë³„ ì„±ëŠ¥ì´ output csvì— ê°™ì´ ì €ì¥ë˜ê³ , ëª¨ë¸ ë³„ ì„±ëŠ¥ì„ ë¹„êµí•œ plot ë˜í•œ ì €ì¥ë©ë‹ˆë‹¤.

**Inference asset**  
inference assetì—ì„œëŠ” input asset, preprocess assetì„ ê±°ì³ ì „ë‹¬ë°›ì€ inference ë°ì´í„°ë¥¼ ì½ê³ , ë‹¤ì‹œ ê·¸ë£¹ ë³„, ë°ì´í„° ì»¬ëŸ¼ë³„ë¡œ ë‚˜ëˆ„ê²Œ ë©ë‹ˆë‹¤. ë‚˜ëˆ„ì–´ì§„ ë°ì´í„°ë§ˆë‹¤ ì´ì „ í•™ìŠµ ë‹¨ê³„ì—ì„œ ì €ì¥í•œ ëª¨ë¸ë“¤ ì¤‘ ì„ íƒëœ ëª¨ë¸ë“¤ì„ ë¶ˆëŸ¬ì™€ì„œ ì´ìƒ íƒì§€ë¥¼ ì§„í–‰í•˜ê³  ê²°ê³¼ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.ë§Œì•½ ë ˆì´ë¸” ì»¬ëŸ¼ì´ ì¡´ì¬í•˜ëŠ” ê²½ìš° ëª¨ë¸ ë³„ ì„±ëŠ¥ì´ output csvì— ê°™ì´ ì €ì¥ë˜ê³ , ëª¨ë¸ ë³„ ì„±ëŠ¥ì„ ë¹„êµí•œ plot ë˜í•œ ì €ì¥ë©ë‹ˆë‹¤. ìš´ì˜ì„ ìœ„í•œ íŒŒì¼ì€ inference_summary.yamlë„ ì €ì¥ë©ë‹ˆë‹¤.

## Experimental_plan.yaml

ë‚´ê°€ ê°–ê³  ìˆëŠ” ë°ì´í„°ì— AI Contentsë¥¼ ì ìš©í•˜ë ¤ë©´ ë°ì´í„°ì— ëŒ€í•œ ì •ë³´ì™€ ì‚¬ìš©í•  Contents ê¸°ëŠ¥ë“¤ì„ experimental_plan.yaml íŒŒì¼ì— ê¸°ì…í•´ì•¼ í•©ë‹ˆë‹¤. AI Contentsë¥¼ solution í´ë”ì— ì„¤ì¹˜í•˜ë©´ solution í´ë” ì•„ë˜ì— contents ë§ˆë‹¤ ê¸°ë³¸ìœ¼ë¡œ ì‘ì„±ë˜ì–´ìˆëŠ” experimental_plan.yaml íŒŒì¼ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ yaml íŒŒì¼ì— 'ë°ì´í„° ì •ë³´'ë¥¼ ì…ë ¥í•˜ê³  assetë§ˆë‹¤ ì œê³µí•˜ëŠ” 'user arugments'ë¥¼ ìˆ˜ì •/ì¶”ê°€í•˜ì—¬ ALOë¥¼ ì‹¤í–‰í•˜ë©´, ì›í•˜ëŠ” ì„¸íŒ…ìœ¼ë¡œ ë°ì´í„° ë¶„ì„ ëª¨ë¸ì„ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**experimental_plan.yaml êµ¬ì¡°**  
experimental_plan.yamlì—ëŠ” ALOë¥¼ êµ¬ë™í•˜ëŠ”ë° í•„ìš”í•œ ë‹¤ì–‘í•œ settingê°’ì´ ì‘ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ settingê°’ ì¤‘ 'ë°ì´í„° ê²½ë¡œ'ì™€ 'user arguments'ë¶€ë¶„ì„ ìˆ˜ì •í•˜ë©´ AI Contentsë¥¼ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ë°ì´í„° ê²½ë¡œ ì…ë ¥(external_path)**  
external_pathì˜ parameterëŠ” ë¶ˆëŸ¬ì˜¬ íŒŒì¼ì˜ ê²½ë¡œë‚˜ ì €ì¥í•  íŒŒì¼ì˜ ê²½ë¡œë¥¼ ì§€ì •í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤. save_train_artifacts_pathì™€ save_inference_artifacts_pathëŠ” ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ default ê²½ë¡œì¸ train_artifacts, inference_artifacts í´ë”ì— ëª¨ë¸ë§ ì‚°ì¶œë¬¼ì´ ì €ì¥ë©ë‹ˆë‹¤.
```
external_path:
    - load_train_data_path: ./solution/sample_data/train
    - load_inference_data_path:  ./solution/sample_data/test
    - save_train_artifacts_path:
    - save_inference_artifacts_path:
```

|íŒŒë¼ë¯¸í„°ëª…|DEFAULT|ì„¤ëª… ë° ì˜µì…˜|
|---|----|---|
|load_train_data_path|	./sample_data/train/|	í•™ìŠµ ë°ì´í„°ê°€ ìœ„ì¹˜í•œ í´ë” ê²½ë¡œë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.(csv íŒŒì¼ ëª… ì…ë ¥ X)|
|load_inference_data_path|	./sample_data/test/|	ì¶”ë¡  ë°ì´í„°ê°€ ìœ„ì¹˜í•œ í´ë” ê²½ë¡œë¥¼ ì…ë ¥í•©ë‹ˆë‹¤.(csv íŒŒì¼ ëª… ì…ë ¥ X)|

**ì‚¬ìš©ì íŒŒë¼ë¯¸í„°(user_parameters)**  
user_parameters ì•„ë˜ stepì€ asset ëª…ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì•„ë˜ step: inputì€ input assetë‹¨ê³„ì„ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
argsëŠ” input asset(step: input)ì˜ user argumentsë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. user argumentsëŠ” ê° assetë§ˆë‹¤ ì œê³µí•˜ëŠ” ë°ì´í„° ë¶„ì„ ê´€ë ¨ ì„¤ì • íŒŒë¼ë¯¸í„°ì…ë‹ˆë‹¤. ì´ì— ëŒ€í•œ ì„¤ëª…ì€ ì•„ë˜ì— User arguments ì„¤ëª…ì„ í™•ì¸í•´ì£¼ì„¸ìš”.
```
user_parameters:
    - train_pipeline:
        - step: input
          args:
            - file_type
            ...
          ui_args:
            ...

```
## Algorithms and models

TCRì˜ Train/Inference assetì—ëŠ” ì´ 5ì¢…ì˜ ëª¨ë¸ì´ ë‚´ì¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë°ì´í„° ë¶„ì„ê°€ë“¤ì´ classification/regression ëª¨ë¸ì„ ë§Œë“¤ë©° ìì£¼ ì‚¬ìš©í•œ ëª¨ë¸ 5ì¢…ê³¼ ê° ëª¨ë¸ ë³„ íŒŒë¼ë¯¸í„° ì„¸íŠ¸ë¥¼ ì„ ì •í•˜ì˜€ìŠµë‹ˆë‹¤. TCRì˜ ëª¨ë¸ ë¦¬ìŠ¤íŠ¸ì™€ íŒŒë¼ë¯¸í„° ì„¸íŠ¸ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤

TCR ë‚´ì¥ ëª¨ë¸
- rf: random forest  
(max_depth: 6, n_estimators: 300), (max_depth: 6, n_estimators: 500)
- gbm: gradient boosting machine  
(max_depth: 5, n_estimators: 300), (max_depth: 6, n_estimators: 400), (max_depth: 7, n_estimators: 500)
- lgbm: light gradient boosting machine  
(max_depth: 5, n_estimators: 300), (max_depth: 7, n_estimators: 400), (max_depth: 9, n_estimators: 500)
- cb: catboost  
(max_depth: 5, n_estimators: 100), (max_depth: 7, n_estimators: 300), (max_depth: 9, n_estimators: 500)
- xgb: Extreme Gradient Boosting  
(max_depth: 5, n_estimators: 300), (max_depth: 6, n_estimators: 400), (max_depth: 7, n_estimators: 500)

![poster](./catboost.png)


# ğŸ“‚Input and Artifacts

## ë°ì´í„° ì¤€ë¹„

**í•™ìŠµ ë°ì´í„° ì¤€ë¹„**  
1. ì´ìƒ íƒì§€ë¥¼ í•˜ê³ ì í•˜ëŠ” í¬ì¸íŠ¸ë“¤ì´ ì»¬ëŸ¼ìœ¼ë¡œ ì´ë£¨ì–´ì§„ csv íŒŒì¼ì„ ì¤€ë¹„í•©ë‹ˆë‹¤.
2. ëª¨ë“  csv íŒŒì¼ì€ í•´ë‹¹ rowë¥¼ ì‹ë³„í•  ìˆ˜ ìˆëŠ” time columnì´ ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤.
3. ë§Œì•½ time columnì´ ì¤‘ë³µë˜ëŠ” ê²½ìš° ì´ë¥¼ drop í•˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œì•½ dropí•˜ì§€ ì•ŠëŠ” ê²½ìš° rowë³„ë¡œ ì‹ë³„ì´ ê°€ëŠ¥í•˜ë„ë¡ í•˜ëŠ” ì»¬ëŸ¼ë“¤ì´ ë³„ë„ë¡œ ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤.
4. label ì»¬ëŸ¼ì€ optional í•©ë‹ˆë‹¤. ë§Œì•½ ì¡´ì¬í•˜ëŠ” ê²½ìš° x ì»¬ëŸ¼ ë³„ë¡œ ëª¨ë‘ ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤.
5. ê·¸ë£¹ ë³„ë¡œ ë¬¶ëŠ” ê²½ìš° ê·¸ë£¹ ë³„ë¡œ ë¬¶ê¸° ìœ„í•œ ì»¬ëŸ¼ì´ ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤.

**í•™ìŠµ ë°ì´í„°ì…‹ ì˜ˆì‹œ**

|time_col|x_col_1|x_col_2|grouupkey|
|------|---|---|---|
|time 1|value 1_1|value 1_2|group1|
|time 2|value 2_1|value2_2|group2|
|time 3|value 3_1|value3_2|group1|

**Input data directory êµ¬ì¡° ì˜ˆì‹œ**  
- ALOë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” trainê³¼ inference íŒŒì¼ì´ ë¶„ë¦¬ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. ì•„ë˜ì™€ ê°™ì´ í•™ìŠµì— ì‚¬ìš©í•  ë°ì´í„°ì™€ ì¶”ë¡ ì— ì‚¬ìš©í•  ë°ì´í„°ë¥¼ êµ¬ë¶„í•´ì£¼ì„¸ìš”.
- í•˜ë‚˜ì˜ í´ë” ì•„ë˜ ìˆëŠ” ëª¨ë“  íŒŒì¼ì„ input assetì—ì„œ ì·¨í•©í•´ í•˜ë‚˜ì˜ dataframeìœ¼ë¡œ ë§Œë“  í›„ ëª¨ë¸ë§ì— ì‚¬ìš©ë©ë‹ˆë‹¤. (ê²½ë¡œ ë°‘ í•˜ìœ„ í´ë” ì•ˆì— ìˆëŠ” íŒŒì¼ë„ í•©ì³ì§‘ë‹ˆë‹¤.)
- í•˜ë‚˜ì˜ í´ë” ì•ˆì— ìˆëŠ” ë°ì´í„°ì˜ ì»¬ëŸ¼ì€ ëª¨ë‘ ë™ì¼í•´ì•¼ í•©ë‹ˆë‹¤.
```
./{train_folder}/
    â”” train_data1.csv
    â”” train_data2.csv
    â”” train_data3.csv
./{inference_folder}/
    â”” inference_data1.csv
    â”” inference_data2.csv
    â”” inference_data3.csv
```

## ë°ì´í„° ìš”êµ¬ì‚¬í•­

**í•„ìˆ˜ ìš”êµ¬ì‚¬í•­**  
ì…ë ¥ ë°ì´í„°ëŠ” ë‹¤ìŒ ì¡°ê±´ì„ ë°˜ë“œì‹œ ë§Œì¡±í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.

|index|item|spec.|
|----|----|----|
|1|x ì»¬ëŸ¼ì˜ ê°œìˆ˜|1ê°œ ì´ìƒ|
|2|time ì»¬ëŸ¼ì˜ ê°œìˆ˜|1ê°œ|
|3|x ì»¬ëŸ¼ì˜ íƒ€ì…|float|

**ì¶”ê°€ ìš”êµ¬ì‚¬í•­**  
ìµœì†Œí•œì˜ ì„±ëŠ¥ì„ ë³´ì¥í•˜ê¸° ìœ„í•œ ì¡°ê±´ì…ë‹ˆë‹¤. í•˜ê¸° ì¡°ê±´ì´ ë§Œì¡±ë˜ì§€ ì•Šì•„ë„ ì•Œê³ ë¦¬ì¦˜ì€ ëŒì•„ê°€ì§€ë§Œ ì„±ëŠ¥ì€ í™•ì¸ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤    

|index|item|spec.|
|----|-----|---|
|1|time ì»¬ëŸ¼|time ì»¬ëŸ¼ì˜ ê°’ì€ ì¤‘ë³µì´ ìµœëŒ€í•œ ì ì–´ì•¼ í•©ë‹ˆë‹¤. ì¤‘ë³µë˜ëŠ” time ì»¬ëŸ¼ ê°’ì´ ìˆëŠ”ë° ì¤‘ë³µ time ì»¬ëŸ¼ì„ drop ì‹œí‚¤ê²Œ í•˜ë©´ ì›ì¹˜ ì•Šê²Œ í•»ë“¤ì´ ì‚­ì œ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.|
|2|NG ë°ì´í„°|NG ë°ì´í„°ê°€ ì•„ì˜ˆ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš° ì„±ëŠ¥ì— ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆìŠµë‹ˆë‹¤.|
|3|group key|group ë§ˆë‹¤ ë°ì´í„° ì–‘ì´ ì¶©ë¶„í•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš° ì„±ëŠ¥ì— ì•…ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆìŠµë‹ˆë‹¤.|

## ì‚°ì¶œë¬¼

í•™ìŠµ/ì¶”ë¡ ì„ ì‹¤í–‰í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ì‚°ì¶œë¬¼ì´ ìƒì„±ë©ë‹ˆë‹¤.  

**Train pipeline**
```
./alo/train_artifacts/
    â”” models/preprocess/
        â”” train_config.pkl
        â”” train_pipeline_x.pkl
    â”” models/train/prep_{x ì»¬ëŸ¼ëª…}
        â”” train_params.pkl
    â”” output/
        â”” train_result.csv
    â”” extra_output/train/prep_{x ì»¬ëŸ¼ëª…}
        â”” confusion_matrix.jpg (y ì»¬ëŸ¼ ì…ë ¥ì‹œ ìƒì„±)
        â”” plot_anomaly_model_best_model.jpg (y ì»¬ëŸ¼ ì…ë ¥ì‹œ ìƒì„±)
        â”” plot_anomaly_model_{ì„ íƒí•œ ëª¨ë¸ ëª…}.jpg (y ì»¬ëŸ¼ ì…ë ¥ì‹œ ìƒì„±)
        â”” score_compare.jpg (y ì»¬ëŸ¼ ì…ë ¥ì‹œ ìƒì„±)
```

**Inference pipeline**
```
 ./alo/inference_artifacts/
    â”” output/inference/
        â”” output.csv
    â”” extra_output/inference/prep_{x ì»¬ëŸ¼ëª…}
        â”” confusion_matrix.jpg (y ì»¬ëŸ¼ ì…ë ¥ì‹œ ìƒì„±)
        â”” plot_anomaly_model_best_model.jpg (y ì»¬ëŸ¼ ì…ë ¥ì‹œ ìƒì„±)
        â”” plot_anomaly_model_{ì„ íƒí•œ ëª¨ë¸ ëª…}.jpg (y ì»¬ëŸ¼ ì…ë ¥ì‹œ ìƒì„±)
        â”” score_compare.jpg (y ì»¬ëŸ¼ ì…ë ¥ì‹œ ìƒì„±)
    â”” score/
        â”” inference_summary.yaml

```

ê° ì‚°ì¶œë¬¼ì— ëŒ€í•œ ìƒì„¸ ì„¤ëª…ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.  

**train_config.pkl**  
preprocess assetì˜ argumentë¥¼ ë‹´ê³  ìˆëŠ” pickle íŒŒì¼ì…ë‹ˆë‹¤.

**train_pipeline_x.pkl**  
preprocess assetì—ì„œ x ì»¬ëŸ¼ì„ ì „ì²˜ë¦¬í•˜ëŠ” ëª¨ë¸ì„ ì €ì¥í•œ pickle íŒŒì¼ì…ë‹ˆë‹¤.

**train_params.pkl**  
train assetì—ì„œ í•™ìŠµì„ ì§„í–‰ í›„ ëª¨ë¸ì„ ì €ì¥í•œ pkl íŒŒì¼ì…ë‹ˆë‹¤.

**train_result.csv**    
train pipelineì´ ëë‚œ í›„ ê²°ê³¼ë¥¼ ì €ì¥í•œ csv íŒŒì¼ì…ë‹ˆë‹¤.

**confusion_matrix.jpg**  
y ì»¬ëŸ¼ì´ ì£¼ì–´ì§„ ê²½ìš° ëª¨ë¸(ë“¤)ì˜ train dataë¥¼ ì´ìš©í•œ confusion matrixë¥¼ plotí•œ jpg íŒŒì¼ì…ë‹ˆë‹¤.

**plot_anomaly_model_best_model.jpg**  
ëª¨ë¸(ë“¤) ì¤‘ scoreê°€ ê°€ì¥ ë†’ì€ ëª¨ë¸ì´ train dataë¥¼ anomaly detectioní•œ ê²°ê³¼ë¥¼ plotí•œ jpg íŒŒì¼ì…ë‹ˆë‹¤.